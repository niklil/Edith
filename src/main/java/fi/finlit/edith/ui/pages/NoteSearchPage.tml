<html t:type="layout" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">

    <p:title>${message:notesearch}</p:title>

    <t:form t:id="search">
        <t:errors />
        <t:textfield value="searchTerm" />
        <input type="submit" value="${message:search}" />
        <t:if test="notes">
            <div id="editcontrols">
                <t:if test="!editMode">
                    <t:actionlink t:id="toggleEdit">${message:edit}</t:actionlink>
                    <p:else>
                        <t:actionlink t:id="cancel">${message:cancel}</t:actionlink>
                    </p:else>
                </t:if>
            </div>
            <div class="cleaner"> </div>
         </t:if>
    </t:form>

    <t:if test="notes">
        <t:form t:id="edit">
            <div id="formcontrols">
                <t:if test="editMode">
                    <input type="submit" value="${message:save}" />
                </t:if>
            </div>
            <div class="cleaner"> </div>
            <t:grid source="notes" row="note" rowsPerPage="20" t:encoder="encoder"
                include="lemma,basicForm,longText,description" add="actions">
                <p:lemmaCell>
                    <t:if test="editMode">
                        <t:inlineField t:id="lemma" value="note.lemma" value1="note.lemma"/>
                        <p:else>
                            ${note.lemma}
                        </p:else>
                    </t:if>
                </p:lemmaCell>
                <p:basicFormCell>
                    <t:if test="editMode">
                        <t:inlineField t:id="basicForm" value="note.basicForm" value1="note.basicForm" />
                        <p:else>
                            ${note.basicForm}
                        </p:else>
                    </t:if>
                </p:basicFormCell>
                <p:longTextCell>
                    <t:if test="editMode">
                        <t:inlineField t:id="longText" value="note.longText" value1="note.longText" />
                        <p:else>
                            ${note.longText}
                        </p:else>
                    </t:if>
                </p:longTextCell>
                <!-- 
                <p:meaningCell>
                    <t:if test="editMode">
                        <t:inlineField t:id="meaning" value="note.meaning" value1="note.meaning" />
                        <p:else>
                            ${note.meaning}
                        </p:else>
                    </t:if>
                </p:meaningCell>
                 -->
                <p:descriptionCell>
                    <t:if test="editMode">
                        <t:inlineField t:id="description" value="note.description" value1="note.description" />
                        <p:else>
                            ${note.description}
                        </p:else>
                    </t:if>
                </p:descriptionCell>
                <p:actionsCell>
                    <t:actionlink t:id="delete" context="note.id">${message:delete}
                    </t:actionlink>
                </p:actionsCell>
                <p:empty>
                    <p>${message:no-results}</p>
                </p:empty>
            </t:grid>
        </t:form>
        <p:else>
            <p>${message:no-results}</p>
        </p:else>
    </t:if>

    <p:breadcrumbs>
        <a t:type="pageLink" t:page="index">${message:frontpage}</a>
        &gt; ${message:notesearch}
    </p:breadcrumbs>

    <p:leftPanel>
        <t:dashboard />
    </p:leftPanel>

    <p:rightPanel>west</p:rightPanel>

</html>
