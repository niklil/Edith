<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" xmlns:p="tapestry:parameter">
	<t:content>

        <div class="panel narrow search-results">
            <form id="note_filters">
                <input id="numberOfInstancesInDocument" name="numberOfInstancesInDocument" type="checkbox"/><label for="numberOfInstancesInDocument">${message:numberOfInstancesInDocument-label}</label>
                <input id="basicForm" name="basicForm" type="checkbox"/><label for="basicForm">${message:basicForm-label}</label>
                <input id="meaning" name="meaning" type="checkbox"/><label for="meaning">${message:meaning-label}</label>
                <input id="description" name="description" type="checkbox"/><label for="description">${message:description-label}</label>
                <input id="document" name="document" type="checkbox"/><label for="document">${message:document-label}</label>
                <input id="type" name="type" type="checkbox"/><label for="type">${message:type-label}</label>
                <input id="format" name="format" type="checkbox"/><label for="format">${message:format-label}</label>
                <input id="creator" name="creator" type="checkbox"/><label for="creator">${message:creator-label}</label>
                <input id="edited" name="edited" type="checkbox"/><label for="edited">${message:edited-label}</label>
                <input id="status" name="status" type="checkbox"/><label for="status">${message:status-label}</label>
            </form>
            <t:zone t:id="listZone" update="show">
                <t:delegate to="notesList"/>
            </t:zone>

        <t:block t:id="notesList">
          <script type="text/javascript">

            jQuery(function() {
                  jQuery("#note_filters input").each(function() {
                      toggleNoteListElements(jQuery(this));
                  });
                  
                  jQuery(".search-results .selectable-note").click(
                    function(event) {
                        jQuery(".search-results .notes li").removeClass("selected-note");
                        jQuery(this).closest("li").addClass("selected-note");
                        //Update note instances view on the selection
                        TapestryExt.updateZone('documentNotesZone', jQuery(this).attr("href"));
                        return false;
                    }
                  );
                  
                  
            });
          </script>
        
        
            <t:if test="searchResults">
                <ul class="notes">
                    <t:loop source="notesWithInstances" value="noteWithInstances">
                        <t:loop source="noteWithInstances.documentNotes" value="note">
                            <li>
                                <span>
                                <t:actionlink t:id="selectNote" context="note.note.id"
                                    class="selectable-note ${noteConcept.status} ${documentNoteType}">
                                    <em>${note.note.lemma}</em>
                                </t:actionlink> 
                                 </span>
                                
                                <span class="numberOfInstancesInDocument"> ${numberOfInstancesInDocument} ${message:amountOfInstances}; </span>
                                <span class="basicForm">${note.note.term?.basicForm}; </span>
                                <span class="meaning">${note.note.term?.meaning}; </span>
                                <span class="description">${noteConcept.description}; </span>
                                <span class="document">${note.document?.title}; </span>
                                <span class="type">${typesString}; </span>
                                <span class="format"><t:if test="note.note.format"><t:fmt.message key="${note.note.format}"/></t:if>; </span>
                                <span class="creator">${noteConcept.lastEditedBy?.username} (${editorsForNote}); </span>
                                <span class="edited"><t:dateTimeFormat date="note.note.editedOnDate" format="message:dateformat-compact" />; </span>
                                <span class="status"><t:fmt.message key="NoteStatus.${noteConcept.status}"/></span>
                            </li>                           
                            <p:empty>
                                <li>
                                    <span><a href="#start" id="noteid${noteWithInstances.note.id}" class="notelink ${noteWithInstancesConcept.status} ORPHAN"><em>${noteWithInstances.note.lemma}</em></a></span>
                                    <span class="basicForm">${noteWithInstances.note.term?.basicForm}; </span>
                                    <span class="meaning">${noteWithInstances.note.term?.meaning}; </span>
                                    <span class="description">${noteWithInstancesConcept.description}; </span>
                                    <span class="type">${typesString}; </span>
                                    <span class="format"><t:if test="noteWithInstances.note.format"><t:fmt.message key="${noteWithInstances.note.format}"/></t:if>; </span>
                                    <span class="edited"><t:dateTimeFormat date="noteWithInstances.note.editedOnDate" format="message:dateformat-compact" />; </span>
                                    <span class="status"><t:fmt.message key="NoteStatus.${noteWithInstancesConcept.status}"/></span>
                                </li>                                   
                            </p:empty>
                        </t:loop>                       
                    </t:loop>
                </ul>
                <p:else>${message:no-notes}</p:else>
            </t:if>
            
            
        </t:block>


                
            
            
            
            
            
            
           
            <div style="clear:both;"></div>
        </div>
        
        

	</t:content>
</html>