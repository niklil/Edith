<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
  xmlns:p="tapestry:parameter">
<t:content>

  <div class="panel narrow document-notes">
    <t:zone t:id="documentNotesZone" update="show">
      <t:block t:id="documentNotesBlock">

        <script type="text/javascript">
          
          jQuery(function() {
        	  
    		//Scroll to the selected document note if found on load
    		var elem = jQuery("#start${localId}");
    		if (elem.size() != 0) {
    			jQuery("#left").scrollTo(elem);
    		}
    	  });
  
          //Update edit zone
    	  jQuery(".document-notes .selectable-doc-note").click(
            function(event) {
            	jQuery(".document-notes .notes li").removeClass("selected-note");
            	jQuery(this).closest("li").addClass("selected-note");
            	
            	//Scroll to selected element on click
            	var elem = jQuery("#start"+ jQuery(this).attr("localId"));
            	if (elem.size() != 0) {
                    jQuery("#left").scrollTo(elem);
                }
            	
            	//Update note instances view on the selection
            	TapestryExt.updateZone('noteEditZone', jQuery(this).attr("href"));
            	return false;
            });
		</script>



        <ul class="notes">
          <t:loop source="documentNotes" value="documentNote">
            <li class="${selectedCssClass}">
                <t:actionlink t:id="selectDocumentNote"
                context="documentNote.id" class="selectable-doc-note" localId="${documentNote.localId}">${documentNote.longText}, 
                    ${documentNote.documentRevision.document.title}</t:actionlink>
            </li>
          </t:loop>
        </ul>


      </t:block>
    </t:zone>
  </div>
</t:content>
</html>